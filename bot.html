<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Bot - PharmaBalance</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="app-styles.css?v=2.0">

    <!-- Tailwind for Chat Interface Only -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            corePlugins: {
                preflight: false // Disable preflight to prevent breaking existing navbar styles
            },
            theme: {
                extend: {
                    colors: {
                        "primary": "#00d4ff",
                        "secondary": "#ff6b6b",
                        "background-light": "#f6f7f8",
                        "background-dark": "#0a0a0a",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    }
                },
            },
        }
    </script>

    <style>
        /* Shared Dashboard Styles overrides */
        body {
            background-color: #0a0a0a;
            /* Ensure dark background matches dashboard */
            font-family: 'Inter', sans-serif;
        }

        /* Chat Specific Animations */
        .chat-message {
            opacity: 0;
            animation: fadeIn 0.3s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typing {

            0%,
            80%,
            100% {
                transform: scale(0);
            }

            40% {
                transform: scale(1);
            }
        }

        /* Material Symbols adjustments for FontAwesome compat */
        .material-symbols-outlined {
            font-family: 'Material Symbols Outlined';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
            -webkit-font-feature-settings: 'liga';
            -webkit-font-smoothing: antialiased;
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="logo">
            <i class="fa-solid fa-flask-vial logo-icon"></i>
            PharmaBalance
        </div>
        <ul class="nav-links">
            <li><a href="analysis.html" class="nav-link">Dashboard</a></li>
            <li><a href="import.html" class="nav-link">Drug Import</a></li>
            <li><a href="analysis.html" class="nav-link">Analysis</a></li>
            <li><a href="bot.html" class="nav-link active">Bot</a></li>
        </ul>
        <div class="user-menu">
            <div class="user-profile">
                <i class="fa-solid fa-circle-user avatar-icon"></i>
                Dr. Pharma
            </div>
            <button class="btn-logout">Logout</button>
        </div>
    </nav>

    <!-- Main Content with Tailwind -->
    <main style="padding-top: 80px; height: 100vh; overflow: hidden;">
        <div class="relative flex h-full w-full flex-col">
            <!-- Chat Container -->
            <div class="relative flex h-full flex-col gap-6 bg-cover bg-center bg-no-repeat items-center justify-center p-4 md:p-8 text-center overflow-hidden"
                style='background-image: linear-gradient(rgba(10, 10, 10, 0.9) 0%, rgba(10, 10, 10, 0.8) 100%), url("https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=2070&auto=format&fit=crop");'>

                <!-- Chat Interface -->
                <div
                    class="w-full max-w-4xl flex flex-col h-[85vh] bg-slate-900/60 backdrop-blur-xl border border-slate-700/50 rounded-2xl shadow-2xl overflow-hidden">

                    <!-- Chat Header -->
                    <div class="p-6 border-b border-slate-700/50 flex items-center gap-4 bg-slate-900/40">
                        <div class="bg-primary/20 p-2 rounded-lg">
                            <i class="fa-solid fa-robot text-primary text-xl"></i>
                        </div>
                        <div class="text-left">
                            <h3 class="text-white font-bold text-lg" style="margin: 0;">Pharma Bot</h3>
                            <p class="text-slate-400 text-sm" style="margin: 0;">Powered by Gemini 2.5 Flash</p>
                        </div>
                    </div>

                    <!-- Messages Area -->
                    <div id="chat-messages"
                        class="flex-1 overflow-y-auto p-6 space-y-6 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent">
                        <!-- Welcome Message -->
                        <div class="flex gap-4">
                            <div
                                class="w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0">
                                <i class="fa-solid fa-robot text-primary text-sm"></i>
                            </div>
                            <div
                                class="bg-slate-800/80 p-4 rounded-2xl rounded-tl-none border border-slate-700 max-w-[80%] text-left">
                                <p class="text-slate-200" style="margin: 0;">Hello! I'm your PharmaBalance Bot. I can
                                    help you with drug discovery insights, molecular analysis, or general questions
                                    about our platform. How can I assist you today?</p>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="p-6 bg-slate-900/60 border-t border-slate-700/50">
                        <form id="chat-form" class="flex gap-4 items-end" style="margin: 0;">
                            <div class="flex-1 relative">
                                <textarea id="user-input"
                                    class="w-full bg-slate-800/50 border border-slate-600 rounded-xl px-4 py-3 min-h-[50px] max-h-[150px] text-white placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary transition-all resize-none scrollbar-thin"
                                    placeholder="Ask a question..." rows="1" style="color: white;"></textarea>
                            </div>
                            <button type="submit"
                                class="h-[50px] px-6 bg-[#00d4ff] text-black font-bold rounded-xl hover:bg-[#00d4ff]/90 transition-all flex items-center gap-2 border-none cursor-pointer">
                                <span>Send</span>
                                <i class="fa-solid fa-paper-plane text-sm"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="config.js"></script>
    <script src="chatbot.js?v=3.0"></script>
    <script src="auth-check.js?v=3.0"></script>
</body>

</html>